{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\Dave\\\\WebstormProjects\\\\wappsite\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\Dave\\\\WebstormProjects\\\\wappsite\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Dave\\\\WebstormProjects\\\\wappsite\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useContext,useState,useEffect}from'react';import{supabase}from'./supabaseClient';import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/React.createContext();export function useAuth(){return useContext(AuthContext);}export function AuthProvider(_ref){var children=_ref.children;var _useState=useState(),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){var _session$user;var session=supabase.auth.session();setUser((_session$user=session===null||session===void 0?void 0:session.user)!==null&&_session$user!==void 0?_session$user:null);setLoading(false);var _supabase$auth$onAuth=supabase.auth.onAuthStateChange(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event,session){var _session$user2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setUser((_session$user2=session===null||session===void 0?void 0:session.user)!==null&&_session$user2!==void 0?_session$user2:null);setLoading(false);case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}()),listener=_supabase$auth$onAuth.data;return function(){listener===null||listener===void 0?void 0:listener.unsubscribe();};},[]);var value={signUp:function signUp(data){return supabase.auth.signUp(data);},signIn:function signIn(data){return supabase.auth.signIn(data);},signOut:function signOut(){return supabase.auth.signOut();},user:user};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:!loading&&children});}","map":{"version":3,"sources":["C:/Users/Dave/WebstormProjects/wappsite/src/components/Auth.js"],"names":["React","useContext","useState","useEffect","supabase","AuthContext","createContext","useAuth","AuthProvider","children","user","setUser","loading","setLoading","session","auth","onAuthStateChange","event","listener","data","unsubscribe","value","signUp","signIn","signOut"],"mappings":"uZAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,QAA5B,CAAsCC,SAAtC,KAAuD,OAAvD,CACA,OAASC,QAAT,KAAyB,kBAAzB,C,2CAEA,GAAMC,CAAAA,WAAW,cAAGL,KAAK,CAACM,aAAN,EAApB,CAEA,MAAO,SAASC,CAAAA,OAAT,EAAmB,CACxB,MAAON,CAAAA,UAAU,CAACI,WAAD,CAAjB,CACD,CAED,MAAO,SAASG,CAAAA,YAAT,MAAoC,IAAZC,CAAAA,QAAY,MAAZA,QAAY,CACzC,cAAwBP,QAAQ,EAAhC,wCAAOQ,IAAP,eAAaC,OAAb,eACA,eAA8BT,QAAQ,CAAC,IAAD,CAAtC,yCAAOU,OAAP,eAAgBC,UAAhB,eAEAV,SAAS,CAAC,UAAM,mBACd,GAAMW,CAAAA,OAAO,CAAGV,QAAQ,CAACW,IAAT,CAAcD,OAAd,EAAhB,CAEAH,OAAO,gBAACG,OAAD,SAACA,OAAD,iBAACA,OAAO,CAAEJ,IAAV,+CAAkB,IAAlB,CAAP,CACAG,UAAU,CAAC,KAAD,CAAV,CAEA,0BAA2BT,QAAQ,CAACW,IAAT,CAAcC,iBAAd,2FACzB,iBAAOC,KAAP,CAAcH,OAAd,qIACEH,OAAO,iBAACG,OAAD,SAACA,OAAD,iBAACA,OAAO,CAAEJ,IAAV,iDAAkB,IAAlB,CAAP,CACAG,UAAU,CAAC,KAAD,CAAV,CAFF,sDADyB,oEAA3B,CAAcK,QAAd,uBAAQC,IAAR,CAOA,MAAO,WAAM,CACXD,QAAQ,OAAR,EAAAA,QAAQ,SAAR,QAAAA,QAAQ,CAAEE,WAAV,GACD,CAFD,CAGD,CAhBQ,CAgBN,EAhBM,CAAT,CAkBA,GAAMC,CAAAA,KAAK,CAAG,CACZC,MAAM,CAAE,gBAACH,IAAD,QAAUf,CAAAA,QAAQ,CAACW,IAAT,CAAcO,MAAd,CAAqBH,IAArB,CAAV,EADI,CAEZI,MAAM,CAAE,gBAACJ,IAAD,QAAUf,CAAAA,QAAQ,CAACW,IAAT,CAAcQ,MAAd,CAAqBJ,IAArB,CAAV,EAFI,CAGZK,OAAO,CAAE,yBAAMpB,CAAAA,QAAQ,CAACW,IAAT,CAAcS,OAAd,EAAN,EAHG,CAIZd,IAAI,CAAJA,IAJY,CAAd,CAOA,mBACE,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAEW,KAA7B,UACG,CAACT,OAAD,EAAYH,QADf,EADF,CAMD","sourcesContent":["import React, { useContext, useState, useEffect } from 'react'\nimport { supabase } from './supabaseClient'\n\nconst AuthContext = React.createContext()\n\nexport function useAuth() {\n  return useContext(AuthContext)\n}\n\nexport function AuthProvider({ children }) {\n  const [user, setUser] = useState()\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const session = supabase.auth.session()\n\n    setUser(session?.user ?? null)\n    setLoading(false)\n\n    const { data: listener } = supabase.auth.onAuthStateChange(\n      async (event, session) => {\n        setUser(session?.user ?? null)\n        setLoading(false)\n      }\n    )\n\n    return () => {\n      listener?.unsubscribe()\n    }\n  }, [])\n\n  const value = {\n    signUp: (data) => supabase.auth.signUp(data),\n    signIn: (data) => supabase.auth.signIn(data),\n    signOut: () => supabase.auth.signOut(),\n    user,\n  }\n\n  return (\n    <AuthContext.Provider value={value}>\n      {!loading && children}\n    </AuthContext.Provider>\n  )\n  \n}"]},"metadata":{},"sourceType":"module"}