{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\Dave\\\\WebstormProjects\\\\wappsite\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _classCallCheck from\"C:\\\\Users\\\\Dave\\\\WebstormProjects\\\\wappsite\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";import _createClass from\"C:\\\\Users\\\\Dave\\\\WebstormProjects\\\\wappsite\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";import _inherits from\"C:\\\\Users\\\\Dave\\\\WebstormProjects\\\\wappsite\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\inherits.js\";import _createSuper from\"C:\\\\Users\\\\Dave\\\\WebstormProjects\\\\wappsite\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createSuper.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Dave\\\\WebstormProjects\\\\wappsite\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Fragment,Component}from'react';import{supabase}from'../components/supabaseClient';import'bootstrap/dist/css/bootstrap.min.css';import'bootstrap/dist/js/bootstrap.bundle.min.js';import{FaRegTrashAlt}from'react-icons/fa';import{Navigation}from\"../components/Navigation\";import{Container,Row,Col,Accordion,Table,Button,InputGroup,FormControl,ButtonGroup}from'react-bootstrap';import\"../styles/styles.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var FinancialOverview=/*#__PURE__*/function(_Component){_inherits(FinancialOverview,_Component);var _super=_createSuper(FinancialOverview);function FinancialOverview(props){var _this;_classCallCheck(this,FinancialOverview);_this=_super.call(this,props);_this.state={income_forms:[],spending_forms:[],incomes:{},spendings:{}};return _this;}_createClass(FinancialOverview,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.fetch_all();_context.next=3;return supabase.from('income_forms').select();case 3:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"fetch_all\",value:function(){var _fetch_all=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data_income_forms,data_incomes_dict,index_income_form,id,data_spending_forms,data_spendings_dict,index_spending_form,_id;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.fetchIncomeForms_forUser();case 2:data_income_forms=_context2.sent;data_incomes_dict={};_context2.t0=_regeneratorRuntime.keys(data_income_forms);case 5:if((_context2.t1=_context2.t0()).done){_context2.next=13;break;}index_income_form=_context2.t1.value;id=data_income_forms[index_income_form].id;_context2.next=10;return this.fetchIncomes_forIncomeForms(id);case 10:data_incomes_dict[id]=_context2.sent;_context2.next=5;break;case 13:_context2.next=15;return this.fetchSpendingForms_forUser();case 15:data_spending_forms=_context2.sent;data_spendings_dict={};_context2.t2=_regeneratorRuntime.keys(data_spending_forms);case 18:if((_context2.t3=_context2.t2()).done){_context2.next=26;break;}index_spending_form=_context2.t3.value;_id=data_spending_forms[index_spending_form].id;_context2.next=23;return this.fetchSpendings_forSpendingForms(_id);case 23:data_spendings_dict[_id]=_context2.sent;_context2.next=18;break;case 26:this.setState({income_forms:data_income_forms,incomes:data_incomes_dict,spending_forms:data_spending_forms,spendings:data_spendings_dict});case 27:case\"end\":return _context2.stop();}}},_callee2,this);}));function fetch_all(){return _fetch_all.apply(this,arguments);}return fetch_all;}()},{key:\"fetchIncomeForms_forUser\",value:function(){var _fetchIncomeForms_forUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _yield$supabase$from$,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return supabase.from('income_forms').select();case 2:_yield$supabase$from$=_context3.sent;data=_yield$supabase$from$.data;return _context3.abrupt(\"return\",data);case 5:case\"end\":return _context3.stop();}}},_callee3);}));function fetchIncomeForms_forUser(){return _fetchIncomeForms_forUser.apply(this,arguments);}return fetchIncomeForms_forUser;}()},{key:\"fetchIncomes_forIncomeForms\",value:function(){var _fetchIncomes_forIncomeForms=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(income_forms_id){var _yield$supabase$from$2,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return supabase.from(\"incomes\").select().eq(\"income_forms_id\",income_forms_id);case 2:_yield$supabase$from$2=_context4.sent;data=_yield$supabase$from$2.data;return _context4.abrupt(\"return\",data);case 5:case\"end\":return _context4.stop();}}},_callee4);}));function fetchIncomes_forIncomeForms(_x){return _fetchIncomes_forIncomeForms.apply(this,arguments);}return fetchIncomes_forIncomeForms;}()},{key:\"fetchSpendingForms_forUser\",value:function(){var _fetchSpendingForms_forUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var _yield$supabase$from$3,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return supabase.from(\"spending_forms\").select();case 2:_yield$supabase$from$3=_context5.sent;data=_yield$supabase$from$3.data;return _context5.abrupt(\"return\",data);case 5:case\"end\":return _context5.stop();}}},_callee5);}));function fetchSpendingForms_forUser(){return _fetchSpendingForms_forUser.apply(this,arguments);}return fetchSpendingForms_forUser;}()},{key:\"fetchSpendings_forSpendingForms\",value:function(){var _fetchSpendings_forSpendingForms=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(spending_forms_id){var _yield$supabase$from$4,data;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return supabase.from(\"spendings\").select().eq(\"spending_forms_id\",spending_forms_id);case 2:_yield$supabase$from$4=_context6.sent;data=_yield$supabase$from$4.data;return _context6.abrupt(\"return\",data);case 5:case\"end\":return _context6.stop();}}},_callee6);}));function fetchSpendings_forSpendingForms(_x2){return _fetchSpendings_forSpendingForms.apply(this,arguments);}return fetchSpendings_forSpendingForms;}()},{key:\"createIncomeCategorie\",value:function(){var _createIncomeCategorie=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(title){var _yield$supabase$from$5,data,error;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(title.replace(/\\s/g,'')===''){_context7.next=8;break;}_context7.next=3;return supabase.from('income_forms').insert([{title:title,user_id:supabase.auth.user().id}]);case 3:_yield$supabase$from$5=_context7.sent;data=_yield$supabase$from$5.data;error=_yield$supabase$from$5.error;_context7.next=8;return this.fetch_all();case 8:this.setState({title:''});case 9:case\"end\":return _context7.stop();}}},_callee7,this);}));function createIncomeCategorie(_x3){return _createIncomeCategorie.apply(this,arguments);}return createIncomeCategorie;}()},{key:\"createSpendingCategorie\",value:function(){var _createSpendingCategorie=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(title){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(title.replace(/\\s/g,'')===''){_context8.next=5;break;}_context8.next=3;return supabase.from('spending_forms').insert([{title:title,user_id:supabase.auth.user().id}]);case 3:_context8.next=5;return this.fetch_all();case 5:this.setState({title:''});case 6:case\"end\":return _context8.stop();}}},_callee8,this);}));function createSpendingCategorie(_x4){return _createSpendingCategorie.apply(this,arguments);}return createSpendingCategorie;}()},{key:\"render\",value:function render(){var _this2=this;console.log(this.state.income_forms);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navigation,{}),/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{className:\"mt-5\",children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"div\",{className:\"inTitle\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-center title\",children:\"Einnahmen\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"inTitle\",children:[/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(FormControl,{type:\"text\",id:\"new_incomeform_input\",placeholder:\"Neue Kategorie\",className:\"bg-light\"}),/*#__PURE__*/_jsx(Button,{className:\"buttonColor\",variant:\"secondary\",onClick:function onClick(){var input=document.getElementById(\"new_incomeform_input\");_this2.createIncomeCategorie(input.value).then();input.value=\"\";},children:\"Einnahme-Kategorie erstellen\"})]}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(Accordion,{children:insertAccordion(this.state.income_forms,this.state.incomes,true,this.fetch_all.bind(this))})]}),/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"div\",{className:\"inTitle\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-center title\",children:\"Ausgabe\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"inTitle\",children:[/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(FormControl,{type:\"text\",id:\"new_spendingform_input\",placeholder:\"Neue Kategorie\",className:\"bg-light\"}),/*#__PURE__*/_jsx(Button,{className:\"buttonColor\",variant:\"secondary\",onClick:function onClick(){var input=document.getElementById(\"new_spendingform_input\");_this2.createSpendingCategorie(input.value).then();input.value=\"\";},children:\"Ausgabe-Kategorie erstellen\"})]}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(Accordion,{children:insertAccordion(this.state.spending_forms,this.state.spendings,false,this.fetch_all.bind(this))})]})]})})]});}}]);return FinancialOverview;}(Component);function insertAccordion(forms,entries,isIncome,fetch_method){return forms.map(function(form){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(InsertAccordion,{isIncome:isIncome,form:form,amounts:entries[form.id],fetch_method:fetch_method})},form.id+isIncome);});}var InsertAccordion=/*#__PURE__*/function(_Component2){_inherits(InsertAccordion,_Component2);var _super2=_createSuper(InsertAccordion);function InsertAccordion(props){var _this3;_classCallCheck(this,InsertAccordion);_this3=_super2.call(this,props);_this3.state={isIncome:props.isIncome,form:props.form,amounts:props.amounts,title:'',amount:'',fetch_method:props.fetch_method};return _this3;}_createClass(InsertAccordion,[{key:\"fetch_entries\",value:function(){var _fetch_entries=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(!this.state.isIncome){_context9.next=9;break;}_context9.t0=this;_context9.next=4;return this.fetchIncomes();case 4:_context9.t1=_context9.sent;_context9.t2={amounts:_context9.t1};_context9.t0.setState.call(_context9.t0,_context9.t2);_context9.next=15;break;case 9:_context9.t3=this;_context9.next=12;return this.fetchSpendings();case 12:_context9.t4=_context9.sent;_context9.t5={amounts:_context9.t4};_context9.t3.setState.call(_context9.t3,_context9.t5);case 15:case\"end\":return _context9.stop();}}},_callee9,this);}));function fetch_entries(){return _fetch_entries.apply(this,arguments);}return fetch_entries;}()},{key:\"fetchIncomes\",value:function(){var _fetchIncomes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){var _yield$supabase$from$6,data;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return supabase.from('incomes').select().eq(\"income_forms_id\",this.state.form.id);case 2:_yield$supabase$from$6=_context10.sent;data=_yield$supabase$from$6.data;return _context10.abrupt(\"return\",data);case 5:case\"end\":return _context10.stop();}}},_callee10,this);}));function fetchIncomes(){return _fetchIncomes.apply(this,arguments);}return fetchIncomes;}()},{key:\"fetchSpendings\",value:function(){var _fetchSpendings=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var _yield$supabase$from$7,data;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return supabase.from('spendings').select().eq(\"spending_forms_id\",this.state.form.id);case 2:_yield$supabase$from$7=_context11.sent;data=_yield$supabase$from$7.data;return _context11.abrupt(\"return\",data);case 5:case\"end\":return _context11.stop();}}},_callee11,this);}));function fetchSpendings(){return _fetchSpendings.apply(this,arguments);}return fetchSpendings;}()},{key:\"create_entry\",value:function(){var _create_entry=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){var amounts;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:if(this.state.title.replace(/\\s/g,'')===''||this.state.amount.replace(/\\s/g,'')===''){_context12.next=15;break;}if(!this.state.isIncome){_context12.next=9;break;}_context12.next=4;return supabase.from(\"incomes\").insert([{income_forms_id:this.state.form.id,title:this.state.title,amount:this.state.amount}]);case 4:_context12.next=6;return this.fetchIncomes();case 6:amounts=_context12.sent;_context12.next=14;break;case 9:_context12.next=11;return supabase.from(\"spendings\").insert([{spending_forms_id:this.state.form.id,title:this.state.title,amount:this.state.amount}]);case 11:_context12.next=13;return this.fetchSpendings();case 13:amounts=_context12.sent;case 14:this.setState({amounts:amounts});case 15:this.setState({title:'',amount:''});case 16:case\"end\":return _context12.stop();}}},_callee12,this);}));function create_entry(){return _create_entry.apply(this,arguments);}return create_entry;}()},{key:\"delete_category\",value:function(){var _delete_category=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:if(!this.state.isIncome){_context13.next=7;break;}_context13.next=3;return supabase.from('incomes').delete().match({income_forms_id:this.state.form.id});case 3:_context13.next=5;return supabase.from('income_forms').delete().match({id:this.state.form.id});case 5:_context13.next=11;break;case 7:_context13.next=9;return supabase.from('spendings').delete().match({spending_forms_id:this.state.form.id});case 9:_context13.next=11;return supabase.from('spending_forms').delete().match({id:this.state.form.id});case 11:_context13.next=13;return this.state.fetch_method();case 13:case\"end\":return _context13.stop();}}},_callee13,this);}));function delete_category(){return _delete_category.apply(this,arguments);}return delete_category;}()},{key:\"render\",value:function render(){var _this4=this;var valid_numbers_input=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\".\",\"Delete\",\"Backspace\",\"ArrowLeft\",\"ArrowRight\",\"ArrowUp\",\"ArrowDown\"];return/*#__PURE__*/_jsxs(Accordion.Item,{eventKey:this.state.form.id,children:[/*#__PURE__*/_jsxs(ButtonGroup,{className:\"button-group\",children:[/*#__PURE__*/_jsx(Accordion.Header,{className:\"button-accordion\",children:/*#__PURE__*/_jsx(\"span\",{children:this.state.form.title})}),/*#__PURE__*/_jsx(Button,{className:\"button-del-category\",variant:\"transparent\",onClick:function onClick(){_this4.delete_category().then();},children:/*#__PURE__*/_jsx(FaRegTrashAlt,{className:\"text-danger\"})})]}),/*#__PURE__*/_jsxs(Accordion.Body,{children:[/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(FormControl,{type:\"text\",className:\"bg-light\",placeholder:\"Name\",onChange:function onChange(e){return _this4.setState({title:e.target.value});},value:this.state.title}),/*#__PURE__*/_jsx(FormControl,{type:\"number\",className:\"bg-light\",placeholder:\"Preis\",onChange:function onChange(e){return _this4.setState({amount:e.target.value});},onKeyDown:function onKeyDown(e){if(!valid_numbers_input.includes(e.key))e.preventDefault();},value:this.state.amount}),/*#__PURE__*/_jsx(Button,{className:\"inputField\",variant:\"secondary\",onClick:function onClick(){_this4.create_entry().then();},children:\"hinzuf\\xFCgen\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,variant:\"dark\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Preis\"}),/*#__PURE__*/_jsx(\"th\",{className:\"table-del-row text-center\",children:/*#__PURE__*/_jsx(FaRegTrashAlt,{})})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:insertTableContent(this.state.amounts,this.state.isIncome,this.fetch_entries.bind(this)/*, this.state.fetch_method*/)})]})]})]});}}]);return InsertAccordion;}(Component);function insertTableContent(entries,isIncome,fetch_method){return entries.map(function(entry){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(InsertTable,{isIncome:isIncome,entry:entry,fetch_method:fetch_method})},entry.id+isIncome);});}var InsertTable=/*#__PURE__*/function(_Component3){_inherits(InsertTable,_Component3);var _super3=_createSuper(InsertTable);function InsertTable(props){var _this5;_classCallCheck(this,InsertTable);_this5=_super3.call(this,props);_this5.state={isIncome:props.isIncome,entry:props.entry,fetch_method:props.fetch_method};return _this5;}_createClass(InsertTable,[{key:\"delete_entry\",value:function(){var _delete_entry=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(entry_id){return _regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:if(!this.state.isIncome){_context14.next=5;break;}_context14.next=3;return supabase.from('incomes').delete().match({id:entry_id});case 3:_context14.next=7;break;case 5:_context14.next=7;return supabase.from('spendings').delete().match({id:entry_id});case 7:_context14.next=9;return this.state.fetch_method();case 9:case\"end\":return _context14.stop();}}},_callee14,this);}));function delete_entry(_x5){return _delete_entry.apply(this,arguments);}return delete_entry;}()},{key:\"render\",value:function render(){var _this6=this;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:this.state.entry.title}),/*#__PURE__*/_jsx(\"td\",{children:this.state.entry.amount}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{className:\"button-del-category\",variant:\"transparent\",onClick:function onClick(){_this6.delete_entry(_this6.state.entry.id).then();},children:/*#__PURE__*/_jsx(FaRegTrashAlt,{className:\"text-danger\"})})})]});}}]);return InsertTable;}(Component);","map":{"version":3,"sources":["C:/Users/Dave/WebstormProjects/wappsite/src/private_sites/FinancialOverview.js"],"names":["Fragment","Component","supabase","FaRegTrashAlt","Navigation","Container","Row","Col","Accordion","Table","Button","InputGroup","FormControl","ButtonGroup","FinancialOverview","props","state","income_forms","spending_forms","incomes","spendings","fetch_all","from","select","fetchIncomeForms_forUser","data_income_forms","data_incomes_dict","index_income_form","id","fetchIncomes_forIncomeForms","fetchSpendingForms_forUser","data_spending_forms","data_spendings_dict","index_spending_form","fetchSpendings_forSpendingForms","setState","data","income_forms_id","eq","spending_forms_id","title","replace","insert","user_id","auth","user","error","console","log","input","document","getElementById","createIncomeCategorie","value","then","insertAccordion","bind","createSpendingCategorie","forms","entries","isIncome","fetch_method","map","form","InsertAccordion","amounts","amount","fetchIncomes","fetchSpendings","delete","match","valid_numbers_input","delete_category","e","target","includes","key","preventDefault","create_entry","insertTableContent","fetch_entries","entry","InsertTable","entry_id","delete_entry"],"mappings":"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","sourcesContent":["import { Fragment, Component } from 'react';\r\nimport { supabase } from '../components/supabaseClient'\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js'\r\nimport { FaRegTrashAlt } from 'react-icons/fa';\r\nimport { Navigation } from \"../components/Navigation\";\r\nimport { Container, Row, Col, Accordion, Table, Button, InputGroup, FormControl, ButtonGroup } from 'react-bootstrap';\r\nimport \"../styles/styles.css\"\r\n\r\nexport class FinancialOverview extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {income_forms: [], spending_forms: [], incomes: {}, spendings: {}};\r\n    }\r\n\r\n    async componentDidMount(){\r\n        this.fetch_all()\r\n        await supabase\r\n            .from('income_forms')\r\n            .select()\r\n\r\n    }\r\n\r\n    async fetch_all() {\r\n        const data_income_forms = await this.fetchIncomeForms_forUser()\r\n        const data_incomes_dict = {}\r\n        for (let index_income_form in data_income_forms) {\r\n            const id = data_income_forms[index_income_form].id\r\n            data_incomes_dict[id] = await this.fetchIncomes_forIncomeForms(id)\r\n        }\r\n\r\n        const data_spending_forms = await this.fetchSpendingForms_forUser()\r\n        const data_spendings_dict = {}\r\n        for (let index_spending_form in data_spending_forms) {\r\n            const id = data_spending_forms[index_spending_form].id\r\n            data_spendings_dict[id] = await this.fetchSpendings_forSpendingForms(id)\r\n        }\r\n\r\n        this.setState({income_forms: data_income_forms, incomes: data_incomes_dict, spending_forms: data_spending_forms, spendings: data_spendings_dict})\r\n    }\r\n\r\n    async fetchIncomeForms_forUser() {\r\n        const { data } = await supabase\r\n            .from('income_forms')\r\n            .select()\r\n        return data\r\n    }\r\n\r\n    async fetchIncomes_forIncomeForms(income_forms_id) {\r\n        const { data } = await supabase\r\n            .from(\"incomes\")\r\n            .select()\r\n            .eq(\"income_forms_id\", income_forms_id)\r\n\r\n        return data\r\n    }\r\n\r\n    async fetchSpendingForms_forUser() {\r\n        const { data } = await supabase\r\n            .from(\"spending_forms\")\r\n            .select()\r\n        return data\r\n    }\r\n\r\n    async fetchSpendings_forSpendingForms(spending_forms_id) {\r\n        const { data } = await supabase\r\n            .from(\"spendings\")\r\n            .select()\r\n            .eq(\"spending_forms_id\", spending_forms_id)\r\n        return data\r\n    }\r\n\r\n    async createIncomeCategorie(title) {\r\n        if (!(title.replace(/\\s/g, '') === '')) {\r\n            const { data, error } = await supabase\r\n                .from('income_forms')\r\n                .insert([\r\n                    { title: title, user_id: supabase.auth.user().id }\r\n                ])\r\n            await this.fetch_all();\r\n        }\r\n        this.setState({title: ''})\r\n    }\r\n\r\n    async createSpendingCategorie(title) {\r\n        if (!(title.replace(/\\s/g, '') === '')) {\r\n            /*const { data, error } =*/ await supabase\r\n                .from('spending_forms')\r\n                .insert([\r\n                    { title: title, user_id: supabase.auth.user().id }\r\n                ])\r\n            await this.fetch_all();\r\n        }\r\n        this.setState({title: ''})\r\n    }\r\n\r\n    render() {\r\n        console.log(this.state.income_forms)\r\n\r\n        return(\r\n            <>\r\n                <Navigation />\r\n                <Container>\r\n                    <Row className=\"mt-5\">\r\n                        <Col md={6}>\r\n                            <div className=\"inTitle\">\r\n                                <h2 className=\"text-center title\">Einnahmen</h2>\r\n                            </div>\r\n                            <div className=\"inTitle\">\r\n                                <InputGroup>\r\n                                    <FormControl type=\"text\" id=\"new_incomeform_input\" placeholder=\"Neue Kategorie\" className=\"bg-light\" />\r\n                                    <Button className=\"buttonColor\" variant=\"secondary\" onClick={() => {\r\n                                        const input = document.getElementById(\"new_incomeform_input\")\r\n                                        this.createIncomeCategorie(input.value).then()\r\n                                        input.value = \"\"\r\n                                    }}>Einnahme-Kategorie erstellen</Button>\r\n                                </InputGroup>\r\n                                <br/>\r\n                            </div>\r\n                            <Accordion>\r\n                                {\r\n                                    insertAccordion(this.state.income_forms, this.state.incomes, true, this.fetch_all.bind(this))\r\n                                }\r\n                            </Accordion>\r\n                        </Col>\r\n                        <Col md={6}>\r\n                            <div className=\"inTitle\">\r\n                                <h2 className=\"text-center title\">Ausgabe</h2>\r\n                            </div>\r\n                            <div className=\"inTitle\">\r\n                                <InputGroup>\r\n                                    <FormControl type=\"text\" id=\"new_spendingform_input\" placeholder=\"Neue Kategorie\" className=\"bg-light\" />\r\n                                    <Button className=\"buttonColor\" variant=\"secondary\" onClick={() => {\r\n                                        const input = document.getElementById(\"new_spendingform_input\")\r\n                                        this.createSpendingCategorie(input.value).then()\r\n                                        input.value = \"\"\r\n                                    }}>Ausgabe-Kategorie erstellen</Button>\r\n                                </InputGroup>\r\n                                <br/>\r\n                            </div>\r\n                            <Accordion>\r\n                                {\r\n                                    insertAccordion(this.state.spending_forms, this.state.spendings, false, this.fetch_all.bind(this))\r\n                                }\r\n                            </Accordion>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nfunction insertAccordion(forms, entries, isIncome, fetch_method) {\r\n    return forms.map(form => (\r\n        <Fragment key={form.id + isIncome}>\r\n            <InsertAccordion isIncome={isIncome} form={form} amounts={entries[form.id]} fetch_method={fetch_method} />\r\n        </Fragment>\r\n    ))\r\n}\r\n\r\nclass InsertAccordion extends Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isIncome: props.isIncome,\r\n            form: props.form,\r\n            amounts: props.amounts,\r\n            title: '',\r\n            amount: '',\r\n            fetch_method: props.fetch_method\r\n        }\r\n    }\r\n\r\n    async fetch_entries() {\r\n        if (this.state.isIncome) {\r\n            this.setState({amounts: await this.fetchIncomes()})\r\n        }\r\n        else {\r\n            this.setState({amounts: await this.fetchSpendings()})\r\n        }\r\n    }\r\n\r\n    async fetchIncomes() {\r\n        const { data } = await supabase\r\n            .from('incomes')\r\n            .select()\r\n            .eq(\"income_forms_id\", this.state.form.id)\r\n        return data\r\n    }\r\n\r\n    async fetchSpendings() {\r\n        const { data } = await supabase\r\n            .from('spendings')\r\n            .select()\r\n            .eq(\"spending_forms_id\", this.state.form.id)\r\n        return data\r\n    }\r\n\r\n    async create_entry() {\r\n        if (!(this.state.title.replace(/\\s/g, '') === '' || this.state.amount.replace(/\\s/g, '') === '')) {\r\n            let amounts\r\n            if (this.state.isIncome) {\r\n                await supabase\r\n                    .from(\"incomes\")\r\n                    .insert([\r\n                        { income_forms_id: this.state.form.id, title: this.state.title, amount: this.state.amount }\r\n                    ])\r\n                amounts = await this.fetchIncomes()\r\n            }\r\n            else {\r\n                await supabase\r\n                    .from(\"spendings\")\r\n                    .insert([\r\n                        { spending_forms_id: this.state.form.id, title: this.state.title, amount: this.state.amount }\r\n                    ])\r\n\r\n                amounts = await this.fetchSpendings()\r\n            }\r\n            this.setState({amounts: amounts})\r\n        }\r\n        this.setState({title: '', amount: ''})\r\n    }\r\n\r\n    async delete_category() {\r\n        if (this.state.isIncome) {\r\n            await supabase\r\n                .from('incomes')\r\n                .delete()\r\n                .match({income_forms_id: this.state.form.id})\r\n\r\n            await supabase\r\n                .from('income_forms')\r\n                .delete()\r\n                .match({id: this.state.form.id})\r\n        }\r\n        else {\r\n            await supabase\r\n                .from('spendings')\r\n                .delete()\r\n                .match({spending_forms_id: this.state.form.id})\r\n\r\n            await supabase\r\n                .from('spending_forms')\r\n                .delete()\r\n                .match({id: this.state.form.id})\r\n        }\r\n        await this.state.fetch_method()\r\n    }\r\n\r\n\r\n    render() {\r\n        const valid_numbers_input = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \".\" , \"Delete\", \"Backspace\", \"ArrowLeft\", \"ArrowRight\", \"ArrowUp\", \"ArrowDown\"]\r\n\r\n        return(\r\n            <Accordion.Item eventKey={this.state.form.id}>\r\n                <ButtonGroup className=\"button-group\">\r\n                    <Accordion.Header className=\"button-accordion\">\r\n                        <span>{this.state.form.title}</span>\r\n                    </Accordion.Header>\r\n                    <Button className=\"button-del-category\" variant=\"transparent\" onClick={() => {this.delete_category().then()}}><FaRegTrashAlt className=\"text-danger\"/></Button>\r\n                </ButtonGroup>\r\n                <Accordion.Body>\r\n                    <InputGroup>\r\n                        <FormControl type=\"text\" className=\"bg-light\" placeholder=\"Name\" onChange={e => this.setState({ title: e.target.value })} value={this.state.title} />\r\n                        <FormControl type=\"number\" className=\"bg-light\"  placeholder=\"Preis\" onChange={e => this.setState({ amount: e.target.value })} onKeyDown={e => {if (!valid_numbers_input.includes(e.key)) e.preventDefault()}} value={this.state.amount} />\r\n                        <Button className=\"inputField\" variant=\"secondary\" onClick={() => {this.create_entry().then()}}>hinzufügen</Button>\r\n                    </InputGroup>\r\n                    <br/>\r\n                    <Table striped bordered hover variant=\"dark\">\r\n                        <thead>\r\n                        <tr>\r\n                            <th>Name</th>\r\n                            <th>Preis</th>\r\n                            <th className=\"table-del-row text-center\"><FaRegTrashAlt/></th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        {\r\n                            insertTableContent(this.state.amounts, this.state.isIncome, this.fetch_entries.bind(this)/*, this.state.fetch_method*/)\r\n                        }\r\n                        </tbody>\r\n                    </Table>\r\n                </Accordion.Body>\r\n            </Accordion.Item>\r\n        );\r\n    }\r\n}\r\n\r\nfunction insertTableContent(entries, isIncome, fetch_method) {\r\n    return entries.map(entry => (\r\n        <Fragment key={entry.id + isIncome}>\r\n            <InsertTable isIncome={isIncome} entry={entry} fetch_method={fetch_method} />\r\n        </Fragment>\r\n    ))\r\n}\r\n\r\nclass InsertTable extends Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isIncome: props.isIncome,\r\n            entry: props.entry,\r\n            fetch_method: props.fetch_method\r\n        }\r\n    }\r\n\r\n    async delete_entry(entry_id) {\r\n        if (this.state.isIncome) {\r\n            await supabase\r\n                .from('incomes')\r\n                .delete()\r\n                .match({id: entry_id})\r\n        } else {\r\n            await supabase\r\n                .from('spendings')\r\n                .delete()\r\n                .match({id: entry_id})\r\n        }\r\n        await this.state.fetch_method()\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <tr>\r\n                <td>{this.state.entry.title}</td>\r\n                <td>{this.state.entry.amount}</td>\r\n                <td><Button className=\"button-del-category\" variant=\"transparent\" onClick={() => {this.delete_entry(this.state.entry.id).then()}}><FaRegTrashAlt className=\"text-danger\"/></Button></td>\r\n            </tr>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}